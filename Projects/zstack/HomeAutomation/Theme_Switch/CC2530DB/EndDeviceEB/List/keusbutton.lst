###############################################################################
#
# IAR C/C++ Compiler V10.30.1.6000 for 8051               06/Jan/2020  18:26:38
# Copyright 2004-2018 IAR Systems AB.
# PC-locked license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\ZMain\TI2530DB\Theme_switch\keusbutton.c
#    Command line       =  
#        -f C:\Users\Souvik\AppData\Local\Temp\EW6D77.tmp ("D:\VB_Shared\Zigbee
#        Resources\CC2530
#        Development\Projects\zstack\ZMain\TI2530DB\Theme_switch\keusbutton.c"
#        -D SECURE=1 -D TC_LINKKEY_JOIN -D NV_INIT -D NV_RESTORE -D
#        HAL_KEY=FALSE -D HAL_LCD=FALSE -D HAL_LED=FALSE -D
#        MULTICAST_ENABLED=FALSE -D ZCL_READ -D ZCL_WRITE -D ZCL_BASIC -D
#        ZCL_IDENTIFY -D KEUS_GPIO_INTERRUPT_HANDLER_DISABLE -D HAL_UART=TRUE
#        -D HAL_UART_ISR=1 -D HAL_UART_DMA=2 -D HAL_UART_DMA_RX_MAX=64 -D
#        HAL_UART_DMA_TX_MAX=64 -D INT_HEAP_LEN=3172 -lC "D:\VB_Shared\Zigbee
#        Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\EndDeviceEB\List"
#        -lA "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\EndDeviceEB\List"
#        --diag_suppress Pe001,Pa010 -o "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\EndDeviceEB\Obj"
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 16 -f
#        "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3
#        -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f "D:\VB_Shared\Zigbee
#        Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 -DDEFAULT_KEY={0} -DMAC_MAX_FRAME_SIZE=116
#        -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const __code"
#        -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000
#        -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100 -DREJOIN_POLL_RATE=440
#        -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000 -DENABLE_LED4_DISABLE_S1)
#        -f "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cfg"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\" -I
#        "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\Source\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\Source\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\ZMain\TI2530DB\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\hal\include\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\mac\include\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\mt\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\osal\include\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\services\saddr\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\services\sdata\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\af\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\bdb\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\gp\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\sec\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\sys\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\zcl\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\zmac\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
#        -I "D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\..\..\..\..\..\Components\keus\"
#        -Ohz --require_prototypes)
#    Locale             =  English_USA.1252
#    List file          =  
#        D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\EndDeviceEB\List\keusbutton.lst
#    Object file        =  
#        D:\VB_Shared\Zigbee Resources\CC2530
#        Development\Projects\zstack\HomeAutomation\Theme_Switch\CC2530DB\EndDeviceEB\Obj\keusbutton.r51
#
###############################################################################

D:\VB_Shared\Zigbee Resources\CC2530 Development\Projects\zstack\ZMain\TI2530DB\Theme_switch\keusbutton.c
      1          #include "hal_adc.h"

   \                                 In  segment SFR_AN, at 0x8a
   \   unsigned char volatile __sfr P1IFG
   \                     P1IFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe8
   \   union <unnamed> volatile __sfr _A_IRCON2
   \                     _A_IRCON2:
   \   000000                DS 1
      2          #include "hal_flash.h"
      3          #include "hal_lcd.h"
      4          #include "hal_led.h"
      5          #include "hal_uart.h"
      6          #include "hal_drivers.h"
      7          #include "OnBoard.h"
      8          #include "OSAL.h"
      9          #include "OSAL_Nv.h"
     10          #include "ZComDef.h"
     11          #include "ZMAC.h"
     12          #include "keus_gpio_util.h"
     13          #include "keus_timer_util.h"
     14          #include "keusbutton.h"

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin ledPin
   \                     ledPin:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for ledPin>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin ledPin2
   \                     ledPin2:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for ledPin2>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin buttonPin
   \                     buttonPin:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for buttonPin>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin buttonPin2
   \                     buttonPin2:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for buttonPin2>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin buttonPin3
   \                     buttonPin3:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for buttonPin3>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusGPIOPin buttonPin4
   \                     buttonPin4:
   \   000000                DS 5
   \   000005                REQUIRE `?<Initializer for buttonPin4>`
   \   000005                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   bool volatile debounce_read
   \                     debounce_read:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for debounce_read>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \   KeusTimerConfig debounceTimer
   \                     debounceTimer:
   \   000000                DS 8
   \   000008                REQUIRE `?<Initializer for debounceTimer>`
   \   000008                REQUIRE __INIT_XDATA_I
     15          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     16          void debounceTimerCbk(uint8 timerId)
   \                     debounceTimerCbk:
     17          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     18            debounce_read = true;
   \   000004   90....       MOV       DPTR,#debounce_read
   \   000007   7401         MOV       A,#0x1
   \   000009   F0           MOVX      @DPTR,A
     19            KeusTimerUtilRemoveTimer(&debounceTimer);
   \   00000A                ; Setup parameters for call to function KeusTimerUtilRemoveTimer
   \   00000A   7A..         MOV       R2,#debounceTimer & 0xff
   \   00000C   7B..         MOV       R3,#(debounceTimer >> 8) & 0xff
   \   00000E   12....       LCALL     `??KeusTimerUtilRemoveTimer::?relay`; Banked call to: KeusTimerUtilRemoveTimer
     20          }
   \   000011                REQUIRE ?Subroutine0
   \   000011                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   D083         POP       DPH
   \   000002   D082         POP       DPL
   \   000004   02....       LJMP      ?BRET
     21          
     22          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     23          void keusButtonInit(void)
   \                     keusButtonInit:
     24          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     25            KeusGPIOSetDirection(&ledPin);
   \   000004                ; Setup parameters for call to function KeusGPIOSetDirection
   \   000004   7A..         MOV       R2,#ledPin & 0xff
   \   000006   7B..         MOV       R3,#(ledPin >> 8) & 0xff
   \   000008   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     26            KeusGPIOSetDirection(&ledPin2);
   \   00000B                ; Setup parameters for call to function KeusGPIOSetDirection
   \   00000B   7A..         MOV       R2,#ledPin2 & 0xff
   \   00000D   7B..         MOV       R3,#(ledPin2 >> 8) & 0xff
   \   00000F   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     27            KeusGPIOSetDirection(&buttonPin);
   \   000012                ; Setup parameters for call to function KeusGPIOSetDirection
   \   000012   7A..         MOV       R2,#buttonPin & 0xff
   \   000014   7B..         MOV       R3,#(buttonPin >> 8) & 0xff
   \   000016   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     28            KeusGPIOSetDirection(&buttonPin2);
   \   000019                ; Setup parameters for call to function KeusGPIOSetDirection
   \   000019   7A..         MOV       R2,#buttonPin2 & 0xff
   \   00001B   7B..         MOV       R3,#(buttonPin2 >> 8) & 0xff
   \   00001D   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     29            KeusGPIOSetDirection(&buttonPin3);
   \   000020                ; Setup parameters for call to function KeusGPIOSetDirection
   \   000020   7A..         MOV       R2,#buttonPin3 & 0xff
   \   000022   7B..         MOV       R3,#(buttonPin3 >> 8) & 0xff
   \   000024   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     30            KeusGPIOSetDirection(&buttonPin4);
   \   000027                ; Setup parameters for call to function KeusGPIOSetDirection
   \   000027   7A..         MOV       R2,#buttonPin4 & 0xff
   \   000029   7B..         MOV       R3,#(buttonPin4 >> 8) & 0xff
   \   00002B   12....       LCALL     `??KeusGPIOSetDirection::?relay`; Banked call to: KeusGPIOSetDirection
     31            KeusGPIOSetPinValue(&ledPin);
   \   00002E                ; Setup parameters for call to function KeusGPIOSetPinValue
   \   00002E   7A..         MOV       R2,#ledPin & 0xff
   \   000030   7B..         MOV       R3,#(ledPin >> 8) & 0xff
   \   000032   12....       LCALL     `??KeusGPIOSetPinValue::?relay`; Banked call to: KeusGPIOSetPinValue
     32            KeusGPIOSetPinValue(&ledPin2);
   \   000035                ; Setup parameters for call to function KeusGPIOSetPinValue
   \   000035   7A..         MOV       R2,#ledPin2 & 0xff
   \   000037   7B..         MOV       R3,#(ledPin2 >> 8) & 0xff
   \   000039   12....       LCALL     `??KeusGPIOSetPinValue::?relay`; Banked call to: KeusGPIOSetPinValue
     33            KeusGPIOEdgeConfiguration(&buttonPin, GPIO_RISING_EDGE);
   \   00003C                ; Setup parameters for call to function KeusGPIOEdgeConfiguration
   \   00003C   7901         MOV       R1,#0x1
   \   00003E   7A..         MOV       R2,#buttonPin & 0xff
   \   000040   7B..         MOV       R3,#(buttonPin >> 8) & 0xff
   \   000042   12....       LCALL     `??KeusGPIOEdgeConfiguration::?relay`; Banked call to: KeusGPIOEdgeConfiguration
     34            KeusGPIOEdgeConfiguration(&buttonPin2, GPIO_RISING_EDGE);
   \   000045                ; Setup parameters for call to function KeusGPIOEdgeConfiguration
   \   000045   7901         MOV       R1,#0x1
   \   000047   7A..         MOV       R2,#buttonPin2 & 0xff
   \   000049   7B..         MOV       R3,#(buttonPin2 >> 8) & 0xff
   \   00004B   12....       LCALL     `??KeusGPIOEdgeConfiguration::?relay`; Banked call to: KeusGPIOEdgeConfiguration
     35            KeusGPIOEdgeConfiguration(&buttonPin3, GPIO_RISING_EDGE);
   \   00004E                ; Setup parameters for call to function KeusGPIOEdgeConfiguration
   \   00004E   7901         MOV       R1,#0x1
   \   000050   7A..         MOV       R2,#buttonPin3 & 0xff
   \   000052   7B..         MOV       R3,#(buttonPin3 >> 8) & 0xff
   \   000054   12....       LCALL     `??KeusGPIOEdgeConfiguration::?relay`; Banked call to: KeusGPIOEdgeConfiguration
     36            KeusGPIOEdgeConfiguration(&buttonPin4, GPIO_RISING_EDGE);
   \   000057                ; Setup parameters for call to function KeusGPIOEdgeConfiguration
   \   000057   7901         MOV       R1,#0x1
   \   000059   7A..         MOV       R2,#buttonPin4 & 0xff
   \   00005B   7B..         MOV       R3,#(buttonPin4 >> 8) & 0xff
   \   00005D   12....       LCALL     `??KeusGPIOEdgeConfiguration::?relay`; Banked call to: KeusGPIOEdgeConfiguration
     37            KeusGPIOInterruptEnable(&buttonPin);
   \   000060                ; Setup parameters for call to function KeusGPIOInterruptEnable
   \   000060   7A..         MOV       R2,#buttonPin & 0xff
   \   000062   7B..         MOV       R3,#(buttonPin >> 8) & 0xff
   \   000064   12....       LCALL     `??KeusGPIOInterruptEnable::?relay`; Banked call to: KeusGPIOInterruptEnable
     38            KeusGPIOInterruptEnable(&buttonPin2);
   \   000067                ; Setup parameters for call to function KeusGPIOInterruptEnable
   \   000067   7A..         MOV       R2,#buttonPin2 & 0xff
   \   000069   7B..         MOV       R3,#(buttonPin2 >> 8) & 0xff
   \   00006B   12....       LCALL     `??KeusGPIOInterruptEnable::?relay`; Banked call to: KeusGPIOInterruptEnable
     39            KeusGPIOInterruptEnable(&buttonPin3);
   \   00006E                ; Setup parameters for call to function KeusGPIOInterruptEnable
   \   00006E   7A..         MOV       R2,#buttonPin3 & 0xff
   \   000070   7B..         MOV       R3,#(buttonPin3 >> 8) & 0xff
   \   000072   12....       LCALL     `??KeusGPIOInterruptEnable::?relay`; Banked call to: KeusGPIOInterruptEnable
     40            KeusGPIOInterruptEnable(&buttonPin4);    
   \   000075                ; Setup parameters for call to function KeusGPIOInterruptEnable
   \   000075   7A..         MOV       R2,#buttonPin4 & 0xff
   \   000077   7B..         MOV       R3,#(buttonPin4 >> 8) & 0xff
   \   000079   12....       LCALL     `??KeusGPIOInterruptEnable::?relay`; Banked call to: KeusGPIOInterruptEnable
     41          }
   \   00007C   02....       LJMP      ?Subroutine0 & 0xFFFF
     42          

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
     43          HAL_ISR_FUNCTION(halKeusPort1Isr, P1INT_VECTOR)
   \                     halKeusPort1Isr:
     44          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   C0E0         PUSH      A
   \   000002   74EF         MOV       A,#-0x11
   \   000004   12....       LCALL     ?INTERRUPT_ENTER_XSP
   \   000007                ; Saved register size: 17
   \   000007                ; Auto size: 0
     45            HAL_ENTER_ISR();
   \   000007   A2AF         MOV       C,0xa8.7
   \   000009   E4           CLR       A
   \   00000A   33           RLC       A
   \   00000B   FE           MOV       R6,A
   \   00000C   D2AF         SETB      0xa8.7
     46          
     47            if (debounce_read)
   \   00000E   90....       MOV       DPTR,#debounce_read
   \   000011   E0           MOVX      A,@DPTR
   \   000012   7003         JNZ       $+5
   \   000014   02....       LJMP      ??halKeusPort1Isr_0
     48            {
     49              debounce_read = false; //make sure it does not read untill the debounce timer CB sets it again
   \   000017   E4           CLR       A
   \   000018   F0           MOVX      @DPTR,A
     50          
     51              if (P1IFG & BV(buttonPin.bit))
   \   000019   75..01       MOV       ?V0,#0x1
   \   00001C   F5..         MOV       ?V1,A
   \   00001E   90....       MOV       DPTR,#buttonPin + 1
   \   000021   E0           MOVX      A,@DPTR
   \   000022   78..         MOV       R0,#?V0
   \   000024   12....       LCALL     ?S_SHL
   \   000027   E5..         MOV       A,?V0
   \   000029   558A         ANL       A,0x8a
   \   00002B   6010         JZ        ??halKeusPort1Isr_1
     52              {
     53                keusAppEvents |= KEUS_BUTTON1;
   \   00002D   90....       MOV       DPTR,#__Constant_1
   \   000030   78..         MOV       R0,#?V0
   \   000032   12....       LCALL     ?L_MOV_X
   \   000035   90....       MOV       DPTR,#keusAppEvents
   \   000038   78..         MOV       R0,#?V0
   \   00003A   12....       LCALL     ?L_IOR_TO_X
     54              }
     55          
     56              if (P1IFG & BV(buttonPin2.bit))
   \                     ??halKeusPort1Isr_1:
   \   00003D   75..01       MOV       ?V0,#0x1
   \   000040   75..00       MOV       ?V1,#0x0
   \   000043   90....       MOV       DPTR,#buttonPin2 + 1
   \   000046   E0           MOVX      A,@DPTR
   \   000047   78..         MOV       R0,#?V0
   \   000049   12....       LCALL     ?S_SHL
   \   00004C   E5..         MOV       A,?V0
   \   00004E   558A         ANL       A,0x8a
   \   000050   6010         JZ        ??halKeusPort1Isr_2
     57              {
     58                keusAppEvents |= KEUS_BUTTON2;
   \   000052   90....       MOV       DPTR,#__Constant_2
   \   000055   78..         MOV       R0,#?V0
   \   000057   12....       LCALL     ?L_MOV_X
   \   00005A   90....       MOV       DPTR,#keusAppEvents
   \   00005D   78..         MOV       R0,#?V0
   \   00005F   12....       LCALL     ?L_IOR_TO_X
     59              }
     60          
     61              if (P1IFG & BV(buttonPin3.bit))
   \                     ??halKeusPort1Isr_2:
   \   000062   75..01       MOV       ?V0,#0x1
   \   000065   75..00       MOV       ?V1,#0x0
   \   000068   90....       MOV       DPTR,#buttonPin3 + 1
   \   00006B   E0           MOVX      A,@DPTR
   \   00006C   78..         MOV       R0,#?V0
   \   00006E   12....       LCALL     ?S_SHL
   \   000071   E5..         MOV       A,?V0
   \   000073   558A         ANL       A,0x8a
   \   000075   6010         JZ        ??halKeusPort1Isr_3
     62              {
     63                keusAppEvents |= KEUS_BUTTON3;
   \   000077   90....       MOV       DPTR,#__Constant_4
   \   00007A   78..         MOV       R0,#?V0
   \   00007C   12....       LCALL     ?L_MOV_X
   \   00007F   90....       MOV       DPTR,#keusAppEvents
   \   000082   78..         MOV       R0,#?V0
   \   000084   12....       LCALL     ?L_IOR_TO_X
     64              }
     65          
     66              if (P1IFG & BV(buttonPin4.bit))
   \                     ??halKeusPort1Isr_3:
   \   000087   75..01       MOV       ?V0,#0x1
   \   00008A   75..00       MOV       ?V1,#0x0
   \   00008D   90....       MOV       DPTR,#buttonPin4 + 1
   \   000090   E0           MOVX      A,@DPTR
   \   000091   78..         MOV       R0,#?V0
   \   000093   12....       LCALL     ?S_SHL
   \   000096   E5..         MOV       A,?V0
   \   000098   558A         ANL       A,0x8a
   \   00009A   6010         JZ        ??halKeusPort1Isr_4
     67              {
     68                keusAppEvents |= KEUS_BUTTON4;
   \   00009C   90....       MOV       DPTR,#__Constant_8
   \   00009F   78..         MOV       R0,#?V0
   \   0000A1   12....       LCALL     ?L_MOV_X
   \   0000A4   90....       MOV       DPTR,#keusAppEvents
   \   0000A7   78..         MOV       R0,#?V0
   \   0000A9   12....       LCALL     ?L_IOR_TO_X
     69              }
     70          
     71              KeusTimerUtilAddTimer(&debounceTimer);
   \                     ??halKeusPort1Isr_4:
   \   0000AC                ; Setup parameters for call to function KeusTimerUtilAddTimer
   \   0000AC   7A..         MOV       R2,#debounceTimer & 0xff
   \   0000AE   7B..         MOV       R3,#(debounceTimer >> 8) & 0xff
   \   0000B0   12....       LCALL     `??KeusTimerUtilAddTimer::?relay`; Banked call to: KeusTimerUtilAddTimer
     72            }
     73            /*
     74             Clear the CPU interrupt flag for Port_0
     75             PxIFG has to be cleared before PxIF
     76           */
     77            P1IFG = 0;
   \                     ??halKeusPort1Isr_0:
   \   0000B3   758A00       MOV       0x8a,#0x0
     78            P1IF = 0;
   \   0000B6   C2EB         CLR       0xe8.3
     79          
     80            CLEAR_SLEEP_MODE();
     81            HAL_EXIT_ISR();
   \   0000B8   EE           MOV       A,R6
   \   0000B9   A2E0         MOV       C,0xE0 /* A   */.0
   \   0000BB   92AF         MOV       0xa8.7,C
     82          }
   \   0000BD   7F04         MOV       R7,#0x4
   \   0000BF   02....       LJMP      ?INTERRUPT_LEAVE_XSP
   \   0000C2                REQUIRE _A_IEN0
   \   0000C2                REQUIRE P1IFG
   \   0000C2                REQUIRE _A_IRCON2

   \                                 In  segment INTVEC, offset 0x7b, root
   \                     `??halKeusPort1Isr::??INTVEC 123`:
   \   00007B   02....       LJMP       (halKeusPort1Isr)

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for ledPin>`:
   \   000000   00           DB 0
   \   000001   00           DB 0
   \   000002   01           DB 1
   \   000003   00           DB 0
   \   000004   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for ledPin2>`:
   \   000000   00           DB 0
   \   000001   01           DB 1
   \   000002   01           DB 1
   \   000003   00           DB 0
   \   000004   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for buttonPin>`:
   \   000000   01           DB 1
   \   000001   02           DB 2
   \   000002   00           DB 0
   \   000003   01           DB 1
   \   000004   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for buttonPin2>`:
   \   000000   01           DB 1
   \   000001   03           DB 3
   \   000002   00           DB 0
   \   000003   01           DB 1
   \   000004   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for buttonPin3>`:
   \   000000   01           DB 1
   \   000001   04           DB 4
   \   000002   00           DB 0
   \   000003   01           DB 1
   \   000004   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for buttonPin4>`:
   \   000000   01           DB 1
   \   000001   05           DB 5
   \   000002   00           DB 0
   \   000003   01           DB 1
   \   000004   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for debounce_read>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for debounceTimer>`:
   \   000000   ....         DW `??debounceTimerCbk::?relay`
   \   000002   C800         DW 200
   \   000004   01           DB 1
   \   000005   FF           DB -1
   \   000006   0000         DW 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_2:
   \   000000   02000000     DD 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4:
   \   000000   04000000     DD 4

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_8:
   \   000000   08000000     DD 8

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      2      0   debounceTimerCbk
        2      0   -> KeusTimerUtilRemoveTimer
      0     17   halKeusPort1Isr
        0     17   -> KeusTimerUtilAddTimer
      2      0   keusButtonInit
        2      0   -> KeusGPIOEdgeConfiguration
        2      0   -> KeusGPIOInterruptEnable
        2      0   -> KeusGPIOSetDirection
        2      0   -> KeusGPIOSetPinValue


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       5  ?<Initializer for buttonPin2>
       5  ?<Initializer for buttonPin3>
       5  ?<Initializer for buttonPin4>
       5  ?<Initializer for buttonPin>
       8  ?<Initializer for debounceTimer>
       1  ?<Initializer for debounce_read>
       5  ?<Initializer for ledPin2>
       5  ?<Initializer for ledPin>
       7  ?Subroutine0
       1  P1IFG
       1  _A_IEN0
       1  _A_IRCON2
       4  __Constant_1
       4  __Constant_2
       4  __Constant_4
       4  __Constant_8
       5  buttonPin
       5  buttonPin2
       5  buttonPin3
       5  buttonPin4
       8  debounceTimer
      17  debounceTimerCbk
       1  debounce_read
     194  halKeusPort1Isr
       3  halKeusPort1Isr::??INTVEC 123
     127  keusButtonInit
       5  ledPin
       5  ledPin2
      12  -- Other

 
 151 bytes in segment BANKED_CODE
  12 bytes in segment BANK_RELAYS
   3 bytes in segment INTVEC
 194 bytes in segment NEAR_CODE
   3 bytes in segment SFR_AN
  39 bytes in segment XDATA_I
  39 bytes in segment XDATA_ID
  16 bytes in segment XDATA_ROM_C
 
 245 bytes of CODE     memory (+  3 bytes shared)
   0 bytes of CONST    memory (+ 16 bytes shared)
   0 bytes of DATA     memory (+  3 bytes shared)
 151 bytes of HUGECODE memory
  39 bytes of XDATA    memory

Errors: none
Warnings: none
